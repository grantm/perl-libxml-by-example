

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>XPath Expressions &mdash; Perl XML::LibXML by Example  documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/plxbe.css" type="text/css" />
  

  
    <link rel="top" title="Perl XML::LibXML by Example  documentation" href="index.html"/>
        <link rel="next" title="The Document Object Model" href="dom.html"/>
        <link rel="prev" title="A Basic Example" href="basics.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Perl XML::LibXML by Example
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="basics.html">A Basic Example</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">XPath Expressions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#xpath-functions">XPath Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dom.html">The Document Object Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="namespaces.html">Working with XML Namespaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="large-docs.html">Working With Large Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="html.html">Working with HTML</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installing XML::LibXML</a></li>
</ul>

            
          
        </div><div class="custom-sidebar">
  <h3>Project Source</h3>
  <ul>
    <li><a href="https://github.com/grantm/perl-libxml-by-example">Project
    repository on GitHub</a></li>
    <li class="cc-img"><a rel="license" title="Creative Commons Attribution-ShareAlike License" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons CC-BY-SA License" style="border-width:0" src="_static/cc-by-sa.png" /></a></li>
  </ul>
</div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Perl XML::LibXML by Example</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>XPath Expressions</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="_sources/xpath.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="xpath-expressions">
<h1>XPath Expressions<a class="headerlink" href="#xpath-expressions" title="Permalink to this headline">Â¶</a></h1>
<p>As you saw in the <a class="reference internal" href="basics.html"><em>basic examples</em></a> section, the <code class="docutils literal"><span class="pre">findnodes()</span></code>
method takes an XPath expression and finds nodes in the <a class="reference internal" href="dom.html"><em>DOM</em></a> that
match the expression.  There are two ways to call calling the <code class="docutils literal"><span class="pre">findnodes()</span></code>
method:</p>
<ul class="simple">
<li>on the object representing the whole document, or</li>
<li>on an element from the DOM - the element on which you call the method is
called the context element</li>
</ul>
<p>If your XPath expression starts with a &#8216;/&#8217; then the search will start at
top-most element in the document - even if you call <code class="docutils literal"><span class="pre">findnodes()</span></code> on a
different context element.</p>
<p>Start your XPath expression with &#8216;.&#8217; to search down through the children of the
context element.</p>
<p>The remainder of this section simply includes examples of XPath expressions and
descriptions of what they match.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can try out different XPath expressions in the <a class="reference external" href="http://grantm.github.io/perl-libxml-by-example/_static/xpath-sandbox/xpath-sandbox.html">XPath sandbox</a>.
The sandbox doesn&#8217;t actually use Perl or libxml, it simply uses Javascript
to access the XPath engine built into your browser.  However, the
expression matching should work just as it would in your Perl scripts.</p>
</div>
<p><code class="code xpath-try docutils literal"><span class="pre">/playlist</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2Fplaylist">Try it!</a></code></p><p>Match the top-most element of the document if (and <em>only if</em>) it is a
<code class="docutils literal"><span class="pre">&lt;playlist&gt;</span></code> element.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//title</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Ftitle">Try it!</a></code></p><p>Match every <code class="docutils literal"><span class="pre">&lt;title&gt;</span></code> element in the document.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//movie/title</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fmovie%2Ftitle">Try it!</a></code></p><p>Match every <code class="docutils literal"><span class="pre">&lt;title&gt;</span></code> element that is the direct child of a <code class="docutils literal"><span class="pre">&lt;movie&gt;</span></code>
element.</p>
<p><code class="code xpath docutils literal"><span class="pre">./title</span></code></p>
<p>Match every <code class="docutils literal"><span class="pre">&lt;title&gt;</span></code> element that is the direct child of the context
element, e.g.:</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="k">foreach</span> <span class="k">my</span> <span class="nv">$movie</span> <span class="p">(</span><span class="nv">$dom</span><span class="o">-&gt;</span><span class="n">findnodes</span><span class="p">(</span><span class="s">&#39;//movie&#39;</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">say</span> <span class="s">&#39;Title: &#39;</span><span class="p">,</span> <span class="nv">$movie</span><span class="o">-&gt;</span><span class="n">findvalue</span><span class="p">(</span><span class="s">&#39;./title&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="code xpath-try docutils literal"><span class="pre">//title/..</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Ftitle%2F..">Try it!</a></code></p><p>Match any element which is the parent of a <code class="docutils literal"><span class="pre">&lt;title&gt;</span></code> element.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">/*</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2A">Try it!</a></code></p><p>Match the top-most element of the document regardless of the element name.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//person/&#64;role</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fperson%2F%40role">Try it!</a></code></p><p>Match the attribute named <code class="docutils literal"><span class="pre">role</span></code> on every <code class="docutils literal"><span class="pre">&lt;person&gt;</span></code> element.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//person/&#64;*</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fperson%2F%40%2A">Try it!</a></code></p><p>Match every attribute on every <code class="docutils literal"><span class="pre">&lt;person&gt;</span></code> element.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//person[&#64;role]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fperson%5B%40role%5D">Try it!</a></code></p><p>Match every <code class="docutils literal"><span class="pre">&lt;person&gt;</span></code> element <em>that has an attribute</em> named <code class="docutils literal"><span class="pre">role</span></code>.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//*[&#64;url]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2F%2A%5B%40url%5D">Try it!</a></code></p><p>Match every element that has an attribute named <code class="docutils literal"><span class="pre">url</span></code>.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//*[&#64;*]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2F%2A%5B%40%2A%5D">Try it!</a></code></p><p>Match every element that has an attribute of any name.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">/playlist//*[not(&#64;*)]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2Fplaylist%2F%2F%2A%5Bnot%28%40%2A%29%5D">Try it!</a></code></p><p>Match every element that is a descendant of the top-level <code class="docutils literal"><span class="pre">&lt;playlist&gt;</span></code>
element and which does not have any attributes.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//movie[&#64;id=&quot;tt0307479&quot;]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fmovie%5B%40id%3D%22tt0307479%22%5D">Try it!</a></code></p><p>Match every <code class="docutils literal"><span class="pre">&lt;movie&gt;</span></code> element that has an attribute named <code class="docutils literal"><span class="pre">id</span></code> with the
value <code class="docutils literal"><span class="pre">tt0307479</span></code>.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//movie[not(&#64;id=&quot;tt0307479&quot;)]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fmovie%5Bnot%28%40id%3D%22tt0307479%22%29%5D">Try it!</a></code></p><p>Match every <code class="docutils literal"><span class="pre">&lt;movie&gt;</span></code> element that does not have an attribute named
<code class="docutils literal"><span class="pre">id</span></code> with the value <code class="docutils literal"><span class="pre">tt0307479</span></code> (including elements that do not have
an <code class="docutils literal"><span class="pre">id</span></code> attribute at all).</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//*[&#64;id=&quot;tt0307479&quot;]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2F%2A%5B%40id%3D%22tt0307479%22%5D">Try it!</a></code></p><p>Match every element that has an attribute named <code class="docutils literal"><span class="pre">id</span></code> with the value
<code class="docutils literal"><span class="pre">tt0307479</span></code>.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//movie[&#64;id=&quot;tt0307479&quot;]//synopsis</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fmovie%5B%40id%3D%22tt0307479%22%5D%2F%2Fsynopsis">Try it!</a></code></p><p>Match every <code class="docutils literal"><span class="pre">synopsis</span></code> element within every <code class="docutils literal"><span class="pre">&lt;movie&gt;</span></code> element that has
an attribute named <code class="docutils literal"><span class="pre">id</span></code> with the value <code class="docutils literal"><span class="pre">tt0307479</span></code>.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//person[position()=2]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fperson%5Bposition%28%29%3D2%5D">Try it!</a></code></p><p>Match the second <code class="docutils literal"><span class="pre">&lt;person&gt;</span></code> element in each sequence of adjacent
<code class="docutils literal"><span class="pre">&lt;person&gt;</span></code> elements.  Note that the first element in a sequence is at
position 1 not 0.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//person[2]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fperson%5B2%5D">Try it!</a></code></p><p>This is simply a shorthand form of the <code class="docutils literal"><span class="pre">position()=2</span></code> expression above.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//person[position()&lt;3]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fperson%5Bposition%28%29%3C3%5D">Try it!</a></code></p><p>Match the first two <code class="docutils literal"><span class="pre">&lt;person&gt;</span></code> elements in each sequence of adjacent
<code class="docutils literal"><span class="pre">&lt;person&gt;</span></code> elements.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//person[last()]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fperson%5Blast%28%29%5D">Try it!</a></code></p><p>Match the last <code class="docutils literal"><span class="pre">&lt;person&gt;</span></code> element in each sequence of adjacent
<code class="docutils literal"><span class="pre">&lt;person&gt;</span></code> elements.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//cast[count(person)=3]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fcast%5Bcount%28person%29%3D3%5D">Try it!</a></code></p><p>Match every <code class="docutils literal"><span class="pre">&lt;cast&gt;</span></code> element which contains exactly 3 <code class="docutils literal"><span class="pre">&lt;person&gt;</span></code>
elements.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//*[name()='genre']</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2F%2A%5Bname%28%29%3D%27genre%27%5D">Try it!</a></code></p><p>Match every element with the name <code class="docutils literal"><span class="pre">genre</span></code> - exactly equivalent to
<code class="docutils literal"><span class="pre">//genre</span></code>.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//*[starts-with(name(), 'running')]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2F%2A%5Bstarts-with%28name%28%29%2C+%27running%27%29%5D">Try it!</a></code></p><p>Match every element with a name starting with the word <code class="docutils literal"><span class="pre">running</span></code>.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//person[contains(&#64;name, 'Matt')]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fperson%5Bcontains%28%40name%2C+%27Matt%27%29%5D">Try it!</a></code></p><p>Match every <code class="docutils literal"><span class="pre">&lt;person&gt;</span></code> element that has an attribute named <code class="docutils literal"><span class="pre">name</span></code>
which contains the text <code class="docutils literal"><span class="pre">Matt</span></code> anywhere in the attribute value.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//person[contains(&#64;name, 'matt')]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fperson%5Bcontains%28%40name%2C+%27matt%27%29%5D">Try it!</a></code></p><p>Same as above except for the casing of the text to match.  Matching is
case-sensitive.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//person[not(contains(&#64;name, 'e'))]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fperson%5Bnot%28contains%28%40name%2C+%27e%27%29%29%5D">Try it!</a></code></p><p>Match every <code class="docutils literal"><span class="pre">&lt;person&gt;</span></code> element that has an attribute named <code class="docutils literal"><span class="pre">name</span></code>
which does not contain the letter <code class="docutils literal"><span class="pre">e</span></code> anywhere in the attribute value.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//person[starts-with(&#64;name, 'K')]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fperson%5Bstarts-with%28%40name%2C+%27K%27%29%5D">Try it!</a></code></p><p>Match every <code class="docutils literal"><span class="pre">&lt;person&gt;</span></code> element that has an attribute named <code class="docutils literal"><span class="pre">name</span></code> with
a value that starts with the letter <code class="docutils literal"><span class="pre">K</span></code>.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//director/text()</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fdirector%2Ftext%28%29">Try it!</a></code></p><p>Match every text node which is a direct child of a <code class="docutils literal"><span class="pre">&lt;director&gt;</span></code> element.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//cast/text()</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fcast%2Ftext%28%29">Try it!</a></code></p><p>Match every text node which is a direct child of a <code class="docutils literal"><span class="pre">&lt;cast&gt;</span></code> element.
You might imagine that this would not match anything, since in the sample
document the <code class="docutils literal"><span class="pre">&lt;cast&gt;</span></code> elements contain only <code class="docutils literal"><span class="pre">&lt;person&gt;</span></code> elements.  But
if you look carefully, you&#8217;ll see that in between each <code class="docutils literal"><span class="pre">&lt;person&gt;</span></code> element
there is some whitespace - a newline after the preceding element and then
some spaces at the start of the next line.  This whitespace is text and is
therefore matched.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//person[contains(&#64;name,'Matt')]/parent::*</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fperson%5Bcontains%28%40name%2C%27Matt%27%29%5D%2Fparent%3A%3A%2A">Try it!</a></code></p><p>Match the parent of every <code class="docutils literal"><span class="pre">&lt;person&gt;</span></code> element which contains <code class="docutils literal"><span class="pre">Matt</span></code> in
the <code class="docutils literal"><span class="pre">name</span></code> attribute.  (You could also use <code class="docutils literal"><span class="pre">/..</span></code> for the parent).  The
syntax <code class="docutils literal"><span class="pre">parent::*</span></code> means any element on the parent axis.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//person[contains(&#64;name,'Matt')]/ancestor::movie</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fperson%5Bcontains%28%40name%2C%27Matt%27%29%5D%2Fancestor%3A%3Amovie">Try it!</a></code></p><p>Match every <code class="docutils literal"><span class="pre">&lt;movie&gt;</span></code> element which is an ancestor of a <code class="docutils literal"><span class="pre">&lt;person&gt;</span></code>
element which contains <code class="docutils literal"><span class="pre">Matt</span></code> in the <code class="docutils literal"><span class="pre">name</span></code> attribute.  The syntax
<code class="docutils literal"><span class="pre">ancestor::*</span></code> means any element on the ancestor axis.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//genre[text()='drama']/following-sibling::*</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fgenre%5Btext%28%29%3D%27drama%27%5D%2Ffollowing-sibling%3A%3A%2A">Try it!</a></code></p><p>Match every element of any name, which is a sibling of a <code class="docutils literal"><span class="pre">&lt;genre&gt;</span></code>
element whose complete text content is <code class="docutils literal"><span class="pre">drama</span></code> and which follows that
element in document order.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//genre[text()='drama']/following-sibling::genre</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fgenre%5Btext%28%29%3D%27drama%27%5D%2Ffollowing-sibling%3A%3Agenre">Try it!</a></code></p><p>Match every <code class="docutils literal"><span class="pre">&lt;genre&gt;</span></code> element, which is a sibling of a <code class="docutils literal"><span class="pre">&lt;genre&gt;</span></code>
element whose complete text content is <code class="docutils literal"><span class="pre">drama</span></code> and which follows that
element in document order.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//genre[text()='drama']/preceding-sibling::genre</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fgenre%5Btext%28%29%3D%27drama%27%5D%2Fpreceding-sibling%3A%3Agenre">Try it!</a></code></p><p>Match every <code class="docutils literal"><span class="pre">&lt;genre&gt;</span></code> element, which is a sibling of a <code class="docutils literal"><span class="pre">&lt;genre&gt;</span></code>
element whose complete text content is <code class="docutils literal"><span class="pre">drama</span></code> and which comes before
that element in document order.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//movie[&#64;id=&quot;tt0112384&quot;]/following::title</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fmovie%5B%40id%3D%22tt0112384%22%5D%2Ffollowing%3A%3Atitle">Try it!</a></code></p><p>Match every <code class="docutils literal"><span class="pre">&lt;title&gt;</span></code> element, which comes after a <code class="docutils literal"><span class="pre">&lt;movie&gt;</span></code> element
with <code class="docutils literal"><span class="pre">tt0112384</span></code> as the value of the <code class="docutils literal"><span class="pre">id</span></code> attribute.  Note that &#8216;after&#8217;
means after the closing tag so a <code class="docutils literal"><span class="pre">&lt;title&gt;</span></code> element <em>inside</em> the matching
<code class="docutils literal"><span class="pre">&lt;movie&gt;</span></code> would not be included.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//movie[.//score/text() &lt; 7.5]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fmovie%5B.%2F%2Fscore%2Ftext%28%29+%3C+7.5%5D">Try it!</a></code></p><p>Match every <code class="docutils literal"><span class="pre">&lt;movie&gt;</span></code> element which contains a <code class="docutils literal"><span class="pre">&lt;score&gt;</span></code> element with
text content numerically less than 7.5.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//movie[.//score/text() &gt; 8.0]//synopsis</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fmovie%5B.%2F%2Fscore%2Ftext%28%29+%3E+8.0%5D%2F%2Fsynopsis">Try it!</a></code></p><p>Match every <code class="docutils literal"><span class="pre">&lt;synopsis&gt;</span></code> element in every <code class="docutils literal"><span class="pre">&lt;movie&gt;</span></code> element which
contains a <code class="docutils literal"><span class="pre">&lt;score&gt;</span></code> element with text content numerically greater than
8.0.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//director or //genre</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fdirector+or+%2F%2Fgenre">Try it!</a></code></p><p>Match every element which is a <code class="docutils literal"><span class="pre">&lt;director&gt;</span></code> or a <code class="docutils literal"><span class="pre">&lt;genre&gt;</span></code>.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//person[contains(&#64;name, 'Bill') and contains(&#64;role, 'Fred')]</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fperson%5Bcontains%28%40name%2C+%27Bill%27%29+and+contains%28%40role%2C+%27Fred%27%29%5D">Try it!</a></code></p><p>Match every <code class="docutils literal"><span class="pre">&lt;person&gt;</span></code> element which contains <code class="docutils literal"><span class="pre">Bill</span></code> in the <code class="docutils literal"><span class="pre">name</span></code>
attribute <strong>and</strong> contains <code class="docutils literal"><span class="pre">Fred</span></code> in the role attribute.</p>
<p><code class="code xpath-try docutils literal"><span class="pre">//person[&#64;name='Kevin Bacon']/../person[&#64;name!='Kevin Bacon']</span><a class="xpath-try-it" href="_static/xpath-sandbox/xpath-sandbox.html?q=%2F%2Fperson%5B%40name%3D%27Kevin+Bacon%27%5D%2F..%2Fperson%5B%40name%21%3D%27Kevin+Bacon%27%5D">Try it!</a></code></p><p>Find every person who has played alongside Kevin Bacon.  First find every
<code class="docutils literal"><span class="pre">&lt;person&gt;</span></code> element with a name attribute equal to <code class="docutils literal"><span class="pre">Kevin</span> <span class="pre">Bacon</span></code>. Then
find the parent of each matching element and look for its child
<code class="docutils literal"><span class="pre">&lt;person&gt;</span></code> elements with a name attribute which is not equal to <code class="docutils literal"><span class="pre">Kevin</span>
<span class="pre">Bacon</span></code>.</p>
<div class="section" id="xpath-functions">
<h2>XPath Functions<a class="headerlink" href="#xpath-functions" title="Permalink to this headline">Â¶</a></h2>
<p>Some of the examples above used <a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/XPath/Functions">XPath functions</a>. It&#8217;s worth
noting that the underlying libxml2 library only supports XPath version 1.0 and
there are <a class="reference external" href="http://www.mail-archive.com/xml&#64;gnome.org/msg04082.html">no plans to support 2.0</a>.</p>
<p>XPath 1.0 does not include the <code class="docutils literal"><span class="pre">lower-case()</span></code> or <code class="docutils literal"><span class="pre">upper-case()</span></code> functions,
so nasty workarounds like this are required if you need case-insensitive
matching:</p>
<div class="highlight-perl"><div class="highlight"><pre><span class="k">my</span> <span class="nv">$query</span> <span class="o">=</span> <span class="sx">q{</span>
<span class="sx">    //person[</span>
<span class="sx">        contains(</span>
<span class="sx">            translate(</span>
<span class="sx">                @name,</span>
<span class="sx">                &#39;ABCDEFGHIJKLMNOPQRSTUVWXZY&#39;,</span>
<span class="sx">                &#39;abcdefghijklmnopqrstuvwxyz&#39;</span>
<span class="sx">            ),</span>
<span class="sx">            &#39;matt&#39;</span>
<span class="sx">        )</span>
<span class="sx">    ]</span>
<span class="sx">}</span><span class="p">;</span>

<span class="k">foreach</span> <span class="k">my</span> <span class="nv">$person</span> <span class="p">(</span><span class="nv">$dom</span><span class="o">-&gt;</span><span class="n">findnodes</span><span class="p">(</span><span class="nv">$query</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">say</span> <span class="s">&quot;Person: $person-&gt;{name}&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Alternatively, you can use the Perl API to <a class="reference external" href="https://metacpan.org/pod/distribution/XML-LibXML/lib/XML/LibXML/XPathContext.pod#Custom-XPath-functions">register custom XPath functions</a>.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dom.html" class="btn btn-neutral float-right" title="The Document Object Model" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="basics.html" class="btn btn-neutral" title="A Basic Example" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2018, Grant McLean.
      Last updated on 2018-06-03.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/plxbe.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>